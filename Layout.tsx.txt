// src/components/Layout.tsx
import React from 'react';
import { UserRole } from '../types';

interface LayoutProps {
  children: React.ReactNode;
  activeTab: string;
  setActiveTab: (tab: string) => void;
  userRole: UserRole;
}

const Layout: React.FC<LayoutProps> = ({ children, activeTab, setActiveTab, userRole }) => {
  const navItems = [
    { id: 'home', label: 'Home', icon: 'ğŸ ' },
    { id: 'wellness', label: 'Wellness', icon: 'ğŸŒ¿' },
    { id: 'routine', label: 'Routine', icon: 'ğŸ“…' },
    { id: 'places', label: 'Places', icon: 'ğŸ“' },
    { id: 'support', label: 'Support', icon: 'ğŸ¤' },
    { id: 'companion', label: 'Companion', icon: 'ğŸ¤–' } // Only show if premium, but for now show all
  ];

  return (
    <div className="min-h-screen bg-[#FFF9F0] pb-24 md:pb-0 md:pl-64">
      {/* Mobile Header */}
      <header className="fixed top-0 left-0 right-0 h-16 bg-[#3B7080] text-white flex items-center justify-between px-4 z-50 md:hidden shadow-md">
        <h1 className="font-serif text-xl font-bold">Silent Voices</h1>
        <div className="w-8 h-8 bg-[#88B29C] rounded-full flex items-center justify-center text-xs font-bold">
          {userRole === 'ADDICTION' ? 'ME' : 'FAM'}
        </div>
      </header>

      {/* Desktop Sidebar */}
      <aside className="hidden md:flex flex-col fixed left-0 top-0 bottom-0 w-64 bg-[#3B7080] text-white p-6 z-50">
        <h1 className="font-serif text-2xl font-bold mb-10">Silent Voices Recover</h1>
        <nav className="flex-1 space-y-2">
          {navItems.map((item) => (
            <button
              key={item.id}
              onClick={() => setActiveTab(item.id)}
              className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${
                activeTab === item.id 
                  ? 'bg-white/20 font-bold shadow-lg translate-x-1' 
                  : 'hover:bg-white/10 hover:translate-x-1'
              }`}
            >
              <span className="text-xl">{item.icon}</span>
              <span>{item.label}</span>
            </button>
          ))}
        </nav>
      </aside>

      {/* Main Content Area */}
      <main className="pt-20 px-4 md:pt-8 md:px-8 max-w-4xl mx-auto min-h-screen">
        {children}
      </main>

      {/* Mobile Bottom Nav */}
      <nav className="fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-around p-3 md:hidden z-50 safe-area-pb">
        {navItems.slice(0, 5).map((item) => (
          <button
            key={item.id}
            onClick={() => setActiveTab(item.id)}
            className={`flex flex-col items-center gap-1 p-2 rounded-lg transition-colors ${
              activeTab === item.id ? 'text-[#3B7080] font-bold' : 'text-slate-400'
            }`}
          >
            <span className="text-xl">{item.icon}</span>
            <span className="text-[10px] uppercase tracking-wide">{item.label}</span>
          </button>
        ))}
      </nav>
    </div>
  );
};

export default Layout;